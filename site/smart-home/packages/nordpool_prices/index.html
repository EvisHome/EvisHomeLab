<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for EvisHomeLab - A comprehensive Smart Home &amp; Home Lab built with Home Assistant, Unraid, and Networking gear.">
      
      
        <meta name="author" content="Evis">
      
      
        <link rel="canonical" href="https://www.evishome.com/smart-home/packages/nordpool_prices/">
      
      
        <link rel="prev" href="../home_time_modes/">
      
      
        <link rel="next" href="../office_pc/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Package: Nordpool Prices - EvisHomeLab</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-Q3C6JS2Q46"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-Q3C6JS2Q46",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-Q3C6JS2Q46",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
  <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#package-nordpool-prices" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="EvisHomeLab" class="md-header__button md-logo" aria-label="EvisHomeLab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EvisHomeLab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Package: Nordpool Prices
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="orange" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="orange" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/EvisHome/EvisHomeLab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    EvisHome/EvisHomeLab
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="EvisHomeLab" class="md-nav__button md-logo" aria-label="EvisHomeLab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    EvisHomeLab
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EvisHome/EvisHomeLab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    EvisHome/EvisHomeLab
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../articles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/ai-log-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Log Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/area-occupancy-sensor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Area Occupancy Sensor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/bed-occupancy-sensor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bed Occupancy Sensor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/dns-adguard-unbound/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DNS AdGuard Home &amp; Unbound
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/motorized-blinds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Motorized Horizontal Blinds - Tilt Action
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/tinkercad-project-box-creator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TinkerCad Project Box Creator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/virtual-fireplace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtual Fireplace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_8">
        
          
          <label class="md-nav__link" for="__nav_2_2_8" id="__nav_2_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Ai log summary
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ai log summary
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/ai-log-summary/home-lab-logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home lab logs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../articles/articles/ai-log-summary/unraid-syslog-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unraid syslog server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../home-lab/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Home lab
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home lab
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Smart home
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Smart home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI Automations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration &amp; Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Addons
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Addons
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/frigate_nvr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frigate NVR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../dashboards/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Dashboards
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dashboards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_2">
        
          
          <label class="md-nav__link" for="__nav_4_5_2" id="__nav_4_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Admin system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Admin system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/admin-system/system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_3">
        
          
          <label class="md-nav__link" for="__nav_4_5_3" id="__nav_4_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dashboard persons
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dashboard persons
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/dashboard-persons/car/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CAR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/dashboard-persons/evis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/dashboard-persons/guest_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guest-1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_4">
        
          
          <label class="md-nav__link" for="__nav_4_5_4" id="__nav_4_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home access
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home access
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/home-access/home_access_center/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home Access Center
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_5">
        
          
          <label class="md-nav__link" for="__nav_4_5_5" id="__nav_4_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Main
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Main
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/backyard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backyard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/bathroom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bathroom
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/bedroom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bedroom
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/daughter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Daughter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/electricity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Electricity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/electricity_dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Electricity Dev
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/front_door/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Front Door
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/guest_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guest-2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/guest_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guest-3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/hallway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hallway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/kitchen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kitchen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/living_room/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Living Room
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/lobby/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lobby
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/mud_room/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mud Room
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/office/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Office
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/sauna/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sauna
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/stairs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Stairs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/main/toilet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Toilet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_6">
        
          
          <label class="md-nav__link" for="__nav_4_5_6" id="__nav_4_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Notification center
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notification center
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/notification-center/notifications_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notifications Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_7">
        
          
          <label class="md-nav__link" for="__nav_4_5_7" id="__nav_4_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Room management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Room management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/room-management/room_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Room Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../integrations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/ai_reporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration: AI Log Reporter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Packages
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Packages
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai_summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Ai Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../airthings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Airthings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aqara_w500/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Aqara W500
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../area_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Area Manager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../car/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Car
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Debug Script
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dishwasher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Dishwasher
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dna_tv_hub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Dna Tv Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../garmin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Garmin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../home_time_modes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Home Time Modes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Package: Nordpool Prices
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Nordpool Prices
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process-description-non-technical" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Description (Non-Technical)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dashboard-connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dashboard Connections
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Diagram
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-source-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration (Source Code)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../office_pc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Office Pc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../philips_air_purifier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Philips Air Purifier
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../room_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Room Manager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scenes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Scenes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shelly_3em/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Shelly 3Em
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../smart_notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Smart Notifications
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../smart_speakers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Smart Speakers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tailscale_monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Tailscale Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unifi_access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Unifi Access
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../washing_machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package: Washing Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../workflow/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Workflow
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflow
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../workflow/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../workflow/setup_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../workflow/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tags
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process-description-non-technical" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Description (Non-Technical)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dashboard-connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dashboard Connections
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Diagram
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-source-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration (Source Code)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags">
    
      
      
      
      
        <a href="../../../tags/#tag:automated" class="md-tag">automated</a>
      
    
      
      
      
      
        <a href="../../../tags/#tag:package" class="md-tag">package</a>
      
    
  </nav>


  
  


<h1 id="package-nordpool-prices">Package: Nordpool Prices</h1>
<p><strong>Version:</strong> 1.0.0<br>
<strong>Description:</strong> Nordpool energy price calculations and logic</p>
<!-- START_IMAGE -->
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../assets/images/packages/nordpool_prices.png" data-desc-position="bottom"><img alt="Package Diagram" src="../../assets/images/packages/nordpool_prices.png"></a></p>
<!-- END_IMAGE -->

<h2 id="executive-summary">Executive Summary</h2>
<!-- START_SUMMARY -->
<p>This package handles the complex financial logic for electricity monitoring. It retrieves raw spot prices from Nordpool, applies configurable "Transfers Costs," "Taxes," and "VAT," and produces a "Final Real Cost" per kWh. It also synchronizes price data with energy usage (kWh) to calculate precise 15-minute cost blocks, enabling accurate daily cost tracking that matches the utility bill. It includes forecasting logic to confirm if tomorrow's price data is valid and sufficiently complete (32nd lowest/highest prices).</p>
<!-- END_SUMMARY -->

<h2 id="process-description-non-technical">Process Description (Non-Technical)</h2>
<!-- START_DETAILED -->
<ol>
<li><strong>Get Price</strong>: Every hour, the system checks the current stock market price for electricity.</li>
<li><strong>Add Fees</strong>: It adds your specific transfer fees and taxes (configurable in dashboard) to get the "Plug Price."</li>
<li><strong>Match Usage</strong>: Every 15 minutes, it takes your home energy meter reading and multiplies it by the <em>exact</em> price for that 15-minute window.</li>
<li><strong>Forecast</strong>: It analyzes tomorrow's prices to find the cheapest windows, useful for scheduling the washing machine or car charging.</li>
</ol>
<!-- END_DETAILED -->

<h2 id="dashboard-connections">Dashboard Connections</h2>
<!-- START_DASHBOARD -->
<p>This package powers the following dashboard views:</p>
<ul>
<li><strong><a href="../../dashboards/main/bathroom/">Bathroom</a></strong>: <em>This view manages the bathroom environment. It features a 'Streamline' header card summarizing key states (temperature, washing machine status, occupancy). Lighting controls allow separate adjustments for the sauna, table, and ceiling. A major focus is the smart floor heating system (Aqara W500), which includes a thermostat control, historical temperature graphs, and a dedicated timer automation for overriding default heating schedules.</em> (Uses 1 entities)</li>
<li><strong><a href="../../dashboards/main/electricity/">Electricity</a></strong>: <em>The Electricity dashboard is a detailed analytics hub for home energy. It features sophisticated charts tracking today's and tomorrow's hourly electricity prices (Nordpool), dynamically color-coded based on daily highs and lows. It also monitors daily energy consumption and real-time power usage via Shelly 3EM, providing cost estimates and historical usage trends.</em> (Uses 5 entities)</li>
<li><strong><a href="../../dashboards/main/electricity_dev/">Electricity Dev</a></strong>: <em>This is a development view for the main Electricity dashboard, used for testing new chart configurations and layouts (Panel mode). It replicates the core pricing and usage visualizations but may contain experimental features or alternative display styles like vertical stacks.</em> (Uses 1 entities)</li>
<li><strong><a href="../../dashboards/main/home/">Home</a></strong>: <em>The Home dashboard serves as the central information hub. It features a large clock and family calendars, alongside detailed weather forecasts. Key home stats are highlighted, including real-time energy prices, power usage, and the status of major appliances like the dishwasher and washing machine. The view also provides a high-level overview of the entire house, displaying camera feeds and status summaries for all key rooms (Sauna, Bathroom, Bedroom, etc.) using 'Streamline' area cards.</em> (Uses 2 entities)</li>
</ul>
<!-- END_DASHBOARD -->

<h2 id="architecture-diagram">Architecture Diagram</h2>
<!-- START_MERMAID_DESC -->
<p>The data flow is heavy on Template Sensors. The <code>nordpool</code> service fetches raw data. A Template Sensor (<code>electricity_prices</code>) enriches this with tax/fees. A crucial synchronous logical step happens every 15 minutes: The <code>Energy Cost Final</code> sensor triggers on energy meter resets, looks up the <em>historical</em> price for the just-finished block (15-min alignment), and computes the cost. This ensures that energy used at 13:59 is charged at the 13:00 price, not the 14:00 price.</p>
<!-- END_MERMAID_DESC -->

<!-- START_MERMAID -->
<pre class="mermaid"><code>sequenceDiagram
    participant Cloud as Nordpool API
    participant HA as Home Assistant
    participant Meter as Shelly Energy
    participant DB as Cost Database

    Cloud-&gt;&gt;HA: Raw Prices (c/kWh)
    HA-&gt;&gt;HA: Apply Tax &amp; Transfer Config
    Meter-&gt;&gt;HA: Report 15min Usage (kWh)
    HA-&gt;&gt;HA: Smart Lookback (Find Price for 13:45-14:00)
    HA-&gt;&gt;HA: Calculate Cost (Price * Usage)
    HA-&gt;&gt;DB: Record Cost Block</code></pre>
<!-- END_MERMAID -->

<h2 id="configuration-source-code">Configuration (Source Code)</h2>
<div class="highlight"><pre><span></span><code><span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># Package: Nordpool Prices</span>
<span class="c1"># Version: 1.0.0</span>
<span class="c1"># Description: Nordpool energy price calculations and logic</span>
<span class="c1"># Dependencies: nordpool.get_prices_for_date, sensor.shelly_home_energy_15min</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># 2. INPUT BOOLEANS (Flags &amp; Maintenance)</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="nt">input_boolean</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Energy Prices: Sent flag</span>
<span class="w">  </span><span class="nt">notify_flag_energy_tomorrow_sent</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Energy:</span><span class="nv"> </span><span class="s">Tomorrow</span><span class="nv"> </span><span class="s">Prices</span><span class="nv"> </span><span class="s">Sent"</span>
<span class="w">    </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mdi:checkbox-marked-circle-outline</span>

<span class="nt">template</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">triggers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">time_pattern</span>
<span class="w">        </span><span class="nt">minutes</span><span class="p">:</span><span class="w"> </span><span class="s">"0"</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant</span>
<span class="w">        </span><span class="nt">event</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start</span>

<span class="w">    </span><span class="nt">actions</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">"Fetch</span><span class="nv"> </span><span class="s">Today's</span><span class="nv"> </span><span class="s">Prices"</span>
<span class="w">        </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nordpool.get_prices_for_date</span>
<span class="w">        </span><span class="nt">data</span><span class="p">:</span>
<span class="w">          </span><span class="nt">config_entry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01K72AW80S016AZ3CPD6R2062J</span>
<span class="w">          </span><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">now().date()</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">areas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FI</span>
<span class="w">          </span><span class="nt">currency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EUR</span>
<span class="w">        </span><span class="nt">response_variable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">today_price</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">"Fetch</span><span class="nv"> </span><span class="s">Tomorrow's</span><span class="nv"> </span><span class="s">Prices"</span>
<span class="w">        </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nordpool.get_prices_for_date</span>
<span class="w">        </span><span class="nt">data</span><span class="p">:</span>
<span class="w">          </span><span class="nt">config_entry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01K72AW80S016AZ3CPD6R2062J</span>
<span class="w">          </span><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">now().date()</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">timedelta(days=1)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">areas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FI</span>
<span class="w">          </span><span class="nt">currency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EUR</span>
<span class="w">        </span><span class="nt">response_variable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tomorrow_price</span>

<span class="w">    </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Electricity prices</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_prices</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mdi:cash</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{%- set region = (this.attributes.get('region', 'FI') | string) -%}</span>
<span class="w">          </span><span class="no">{%- set tax = (this.attributes.get('tax', 1.0) | float) -%}</span>
<span class="w">          </span><span class="no">{%- set additional_cost = (this.attributes.get('additional_cost', 0.0) | float) -%}</span>

<span class="w">          </span><span class="no">{% if (today_price is mapping) and (tomorrow_price is mapping) %}</span>
<span class="w">            </span><span class="no">{% set data = namespace(prices=[]) %}</span>
<span class="w">            </span><span class="no">{% for state in today_price[region] %}</span>
<span class="w">              </span><span class="no">{% set data.prices = data.prices + [(((state.price/10 | float)  * tax + additional_cost)) | round(3, default=0)] %}</span>
<span class="w">            </span><span class="no">{% endfor %}</span>
<span class="w">            </span><span class="no">{% for state in tomorrow_price[region] %}</span>
<span class="w">              </span><span class="no">{% set data.prices = data.prices + [(((state.price/10 | float) * tax + additional_cost)) | round(3, default=0)] %}</span>
<span class="w">            </span><span class="no">{% endfor %}</span>
<span class="w">            </span><span class="no">{{min(data.prices)}}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">unavailable</span>
<span class="w">          </span><span class="no">{% endif %}</span>
<span class="w">        </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">tomorrow_valid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">            </span><span class="no">{%- set region = (this.attributes.get('region', 'FI') | string) -%}</span>
<span class="w">            </span><span class="no">{%- if (tomorrow_price is mapping) %}</span>
<span class="w">              </span><span class="no">{%- if tomorrow_price[region] | list | count &gt; 0 -%}</span>
<span class="w">                </span><span class="no">{{ true | bool }}</span>
<span class="w">              </span><span class="no">{%- else %}</span>
<span class="w">                </span><span class="no">{{ false | bool }}</span>
<span class="w">              </span><span class="no">{%- endif %}</span>
<span class="w">            </span><span class="no">{%- else %}</span>
<span class="w">              </span><span class="no">{{ false | bool }}</span>
<span class="w">            </span><span class="no">{%- endif %}</span>
<span class="w">          </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">            </span><span class="no">{%- set region = (this.attributes.get('region', 'FI') | string) -%}</span>
<span class="w">            </span><span class="no">{%- set tax = (this.attributes.get('tax', 1.0) | float) -%}</span>
<span class="w">            </span><span class="no">{%- set additional_cost = (this.attributes.get('additional_cost', 0.0) | float) -%}</span>

<span class="w">            </span><span class="no">{% if (today_price is mapping) and (tomorrow_price is mapping) %}</span>
<span class="w">            </span><span class="no">{% set data = namespace(prices=[]) %}</span>
<span class="w">              </span><span class="no">{% for state in today_price[region] %}</span>
<span class="w">                </span><span class="no">{% set local_start = as_datetime(state.start).astimezone().strftime('%Y-%m-%d %H:%M:%S') %}</span>
<span class="w">                </span><span class="no">{% set local_end = as_datetime(state.end).astimezone().strftime('%Y-%m-%d %H:%M:%S') %}</span>
<span class="w">                </span><span class="no">{% set data.prices = data.prices + [{'start':local_start, 'end':local_end, 'price': (((state.price/10 | float) * tax + additional_cost)) | round(3, default=0)}] %}</span>
<span class="w">              </span><span class="no">{% endfor %}</span>
<span class="w">              </span><span class="no">{% for state in tomorrow_price[region] %}</span>
<span class="w">                </span><span class="no">{% set local_start = as_datetime(state.start).astimezone().strftime('%Y-%m-%d %H:%M:%S') %}</span>
<span class="w">                </span><span class="no">{% set local_end = as_datetime(state.end).astimezone().strftime('%Y-%m-%d %H:%M:%S') %}</span>
<span class="w">                </span><span class="no">{% set data.prices = data.prices + [{'start':local_start, 'end':local_end, 'price': (((state.price/10 | float) * tax + additional_cost)) | round(3, default=0)}] %}</span>
<span class="w">              </span><span class="no">{% endfor %}</span>
<span class="w">              </span><span class="no">{{data.prices}}</span>
<span class="w">            </span><span class="no">{% else %}</span>
<span class="w">              </span><span class="no">[]</span>
<span class="w">            </span><span class="no">{% endif %}</span>
<span class="w">          </span><span class="nt">tax</span><span class="p">:</span><span class="w"> </span><span class="s">"1"</span>
<span class="w">          </span><span class="nt">additional_cost</span><span class="p">:</span><span class="w"> </span><span class="s">"0"</span>
<span class="w">          </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FI</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Price</span><span class="nv"> </span><span class="s">(cents)"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_price_cents</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{{ (states('sensor.electricity_prices') | float(0) * 100) | round(1) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Daily</span><span class="nv"> </span><span class="s">Average</span><span class="nv"> </span><span class="s">(cents)"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_daily_average_cents</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{{ (states('sensor.nord_pool_fi_daily_average') | float(0) * 100) | round(1) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Today</span><span class="nv"> </span><span class="s">32nd</span><span class="nv"> </span><span class="s">Lowest</span><span class="nv"> </span><span class="s">Price"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_today_32nd_lowest</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">availability</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set today = now().date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% if entries %}</span>
<span class="w">            </span><span class="no">{{ entries</span>
<span class="w">               </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'search', today)</span>
<span class="w">               </span><span class="no">| list</span>
<span class="w">               </span><span class="no">| count &gt;= 32 }}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">{{ false }}</span>
<span class="w">          </span><span class="no">{% endif %}</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set today = now().date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set today_prices = entries</span>
<span class="w">              </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'search', today)</span>
<span class="w">              </span><span class="no">| map(attribute='price')</span>
<span class="w">              </span><span class="no">| list %}</span>
<span class="w">          </span><span class="no">{% set sorted = today_prices | sort %}</span>
<span class="w">          </span><span class="no">{{ sorted[31] | round(2) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Today</span><span class="nv"> </span><span class="s">32nd</span><span class="nv"> </span><span class="s">Highest</span><span class="nv"> </span><span class="s">Price"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_today_32nd_highest</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">availability</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set today = now().date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% if entries %}</span>
<span class="w">            </span><span class="no">{{ entries</span>
<span class="w">               </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'search', today)</span>
<span class="w">               </span><span class="no">| list</span>
<span class="w">               </span><span class="no">| count &gt;= 32 }}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">{{ false }}</span>
<span class="w">          </span><span class="no">{% endif %}</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set today = now().date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set today_prices = entries</span>
<span class="w">              </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'search', today)</span>
<span class="w">              </span><span class="no">| map(attribute='price')</span>
<span class="w">              </span><span class="no">| list %}</span>
<span class="w">          </span><span class="no">{% set sorted = today_prices | sort(reverse=true) %}</span>
<span class="w">          </span><span class="no">{{ sorted[31] | round(2) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Tomorrow</span><span class="nv"> </span><span class="s">Valid"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_tomorrow_valid</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{{ state_attr('sensor.electricity_prices', 'tomorrow_valid') }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Tomorrow</span><span class="nv"> </span><span class="s">32nd</span><span class="nv"> </span><span class="s">Lowest</span><span class="nv"> </span><span class="s">Price"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_tomorrow_32nd_lowest</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">availability</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set tomorrow = (now() + timedelta(days=1)).date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% if entries %}</span>
<span class="w">            </span><span class="no">{{ entries</span>
<span class="w">               </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'search', tomorrow)</span>
<span class="w">               </span><span class="no">| list</span>
<span class="w">               </span><span class="no">| count &gt;= 32 }}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">{{ false }}</span>
<span class="w">          </span><span class="no">{% endif %}</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set tomorrow = (now() + timedelta(days=1)).date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set tomorrow_prices = entries</span>
<span class="w">              </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'search', tomorrow)</span>
<span class="w">              </span><span class="no">| map(attribute='price')</span>
<span class="w">              </span><span class="no">| list %}</span>
<span class="w">          </span><span class="no">{% set sorted = tomorrow_prices | sort %}</span>
<span class="w">          </span><span class="no">{{ sorted[31] | round(2) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Electricity</span><span class="nv"> </span><span class="s">Tomorrow</span><span class="nv"> </span><span class="s">32nd</span><span class="nv"> </span><span class="s">Highest</span><span class="nv"> </span><span class="s">Price"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electricity_tomorrow_32nd_highest</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="nt">availability</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set tomorrow = (now() + timedelta(days=1)).date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% if entries %}</span>
<span class="w">            </span><span class="no">{{ entries</span>
<span class="w">               </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">               </span><span class="no">| selectattr('start', 'search', tomorrow)</span>
<span class="w">               </span><span class="no">| list</span>
<span class="w">               </span><span class="no">| count &gt;= 32 }}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">{{ false }}</span>
<span class="w">          </span><span class="no">{% endif %}</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set tomorrow = (now() + timedelta(days=1)).date().isoformat() %}</span>
<span class="w">          </span><span class="no">{% set entries = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set tomorrow_prices = entries</span>
<span class="w">              </span><span class="no">| selectattr('start', 'defined')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'string')</span>
<span class="w">              </span><span class="no">| selectattr('start', 'search', tomorrow)</span>
<span class="w">              </span><span class="no">| map(attribute='price')</span>
<span class="w">              </span><span class="no">| list %}</span>
<span class="w">          </span><span class="no">{% set sorted = tomorrow_prices | sort(reverse=true) %}</span>
<span class="w">          </span><span class="no">{{ sorted[31] | round(2) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Energy</span><span class="nv"> </span><span class="s">Cost</span><span class="nv"> </span><span class="s">15min"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_cost_15min</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">""</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set energy_kwh = states('sensor.shelly_home_energy_15min') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set price_c = states('sensor.nord_pool_fi_current_price') | float(0) * 100 %}</span>
<span class="w">          </span><span class="no">{% set transfer_c = states('input_number.energy_transfer_fee') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set tax_c = states('input_number.energy_tax_c_kwh') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set vat_pct = states('input_number.energy_vat') | float(0) / 100 %}</span>
<span class="w">          </span><span class="no">{% set subtotal_c = price_c + transfer_c + tax_c %}</span>
<span class="w">          </span><span class="no">{% set cost_eur = (energy_kwh * subtotal_c / 100) * (1 + vat_pct) %}</span>
<span class="w">          </span><span class="no">{{ cost_eur | round(3) }}</span>
<span class="w">        </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">energy_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('sensor.shelly_home_energy_15min')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(3)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">spot_price_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">(states('sensor.nord_pool_fi_current_price')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">transfer_fee_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">energy_tax_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">vat_pct</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_vat')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">subtotal_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">((states('sensor.nord_pool_fi_current_price')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0))</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">cost_eur</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">((states('sensor.shelly_home_energy_15min')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">((states('sensor.nord_pool_fi_current_price')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0))</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">100))</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">(1</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_vat')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">100))</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(3)</span><span class="nv"> </span><span class="s">}}"</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Energy</span><span class="nv"> </span><span class="s">Cost</span><span class="nv"> </span><span class="s">15min</span><span class="nv"> </span><span class="s">(c)"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_cost_15min_c</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c"</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set energy_kwh = states('sensor.shelly_home_energy_15min') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set price_c = states('sensor.nord_pool_fi_current_price') | float(0) * 100 %}</span>
<span class="w">          </span><span class="no">{% set transfer_c = states('input_number.energy_transfer_fee') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set tax_c = states('input_number.energy_tax_c_kwh') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set vat_pct = states('input_number.energy_vat') | float(0) / 100 %}</span>
<span class="w">          </span><span class="no">{% set subtotal_c = price_c + transfer_c + tax_c %}</span>
<span class="w">          </span><span class="no">{% set cost_c = energy_kwh * subtotal_c * (1 + vat_pct) %}</span>
<span class="w">          </span><span class="no">{{ cost_c | round(2) }}</span>
<span class="w">        </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">energy_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('sensor.shelly_home_energy_15min')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(3)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">spot_price_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">(states('sensor.nord_pool_fi_current_price')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">transfer_fee_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">energy_tax_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">vat_pct</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_vat')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">subtotal_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">((states('sensor.nord_pool_fi_current_price')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0))</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">cost_eur</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">((states('sensor.shelly_home_energy_15min')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">((states('sensor.nord_pool_fi_current_price')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0))</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">100))</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">(1</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">states('input_number.energy_vat')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">100))</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(3)</span><span class="nv"> </span><span class="s">}}"</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">trigger</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">state</span>
<span class="w">        </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sensor.shelly_home_energy_15min</span>
<span class="w">        </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">"0"</span>
<span class="w">    </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Energy</span><span class="nv"> </span><span class="s">Cost</span><span class="nv"> </span><span class="s">Final</span><span class="nv"> </span><span class="s">15min</span><span class="nv"> </span><span class="s">(c)"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_cost_final_15min_c</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c"</span>

<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set energy_kwh = trigger.from_state.state | float(0) %}</span>
<span class="w">          </span><span class="no">{% set ts = now() - timedelta(seconds=1) %}</span>
<span class="w">          </span><span class="no">{% set aligned = ts.replace(minute=(ts.minute // 15) * 15, second=0, microsecond=0) %}</span>
<span class="w">          </span><span class="no">{% set blocks = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set block = blocks | selectattr('start', 'equalto', aligned.strftime('%Y-%m-%d %H:%M:%S')) | list | first %}</span>
<span class="w">          </span><span class="no">{% set price_c = block.price | float(0) * 100 %}</span>
<span class="w">          </span><span class="no">{% set transfer_c = states('input_number.energy_transfer_fee') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set tax_c = states('input_number.energy_tax_c_kwh') | float(0) %}</span>
<span class="w">          </span><span class="no">{% set vat_pct = states('input_number.energy_vat') | float(0) / 100 %}</span>
<span class="w">          </span><span class="no">{% set subtotal_c = price_c + transfer_c + tax_c %}</span>
<span class="w">          </span><span class="no">{% set cost_c = energy_kwh * subtotal_c * (1 + vat_pct) %}</span>
<span class="w">          </span><span class="no">{{ cost_c | round(2) }}</span>
<span class="w">        </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">energy_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">trigger.from_state.state</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(3)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">spot_price_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">            </span><span class="no">{% set ts = now() - timedelta(seconds=1) %}</span>
<span class="w">            </span><span class="no">{% set aligned = ts.replace(minute=(ts.minute // 15) * 15, second=0, microsecond=0) %}</span>
<span class="w">            </span><span class="no">{% set blocks = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">            </span><span class="no">{% set block = blocks | selectattr('start', 'equalto', aligned.strftime('%Y-%m-%d %H:%M:%S')) | list | first %}</span>
<span class="w">            </span><span class="no">{{ block.price | float(0) * 100 | round(2) }}</span>
<span class="w">          </span><span class="nt">transfer_fee_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_transfer_fee')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">energy_tax_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_tax_c_kwh')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">vat_pct</span><span class="p">:</span><span class="w"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">states('input_number.energy_vat')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float(0)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(2)</span><span class="nv"> </span><span class="s">}}"</span>
<span class="w">          </span><span class="nt">subtotal_c_per_kWh</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">            </span><span class="no">{% set ts = now() - timedelta(seconds=1) %}</span>
<span class="w">            </span><span class="no">{% set aligned = ts.replace(minute=(ts.minute // 15) * 15, second=0, microsecond=0) %}</span>
<span class="w">            </span><span class="no">{% set blocks = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">            </span><span class="no">{% set block = blocks | selectattr('start', 'equalto', aligned.strftime('%Y-%m-%d %H:%M:%S')) | list | first %}</span>
<span class="w">            </span><span class="no">{% set price_c = block.price | float(0) * 100 %}</span>
<span class="w">            </span><span class="no">{% set transfer_c = states('input_number.energy_transfer_fee') | float(0) %}</span>
<span class="w">            </span><span class="no">{% set tax_c = states('input_number.energy_tax_c_kwh') | float(0) %}</span>
<span class="w">            </span><span class="no">{{ (price_c + transfer_c + tax_c) | round(2) }}</span>
<span class="w">          </span><span class="nt">cost_eur</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">            </span><span class="no">{% set energy_kwh = trigger.from_state.state | float(0) %}</span>
<span class="w">            </span><span class="no">{% set ts = now() - timedelta(seconds=1) %}</span>
<span class="w">            </span><span class="no">{% set aligned = ts.replace(minute=(ts.minute // 15) * 15, second=0, microsecond=0) %}</span>
<span class="w">            </span><span class="no">{% set blocks = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">            </span><span class="no">{% set block = blocks | selectattr('start', 'equalto', aligned.strftime('%Y-%m-%d %H:%M:%S')) | list | first %}</span>
<span class="w">            </span><span class="no">{% set price_c = block.price | float(0) * 100 %}</span>
<span class="w">            </span><span class="no">{% set transfer_c = states('input_number.energy_transfer_fee') | float(0) %}</span>
<span class="w">            </span><span class="no">{% set tax_c = states('input_number.energy_tax_c_kwh') | float(0) %}</span>
<span class="w">            </span><span class="no">{% set vat_pct = states('input_number.energy_vat') | float(0) / 100 %}</span>
<span class="w">            </span><span class="no">{% set subtotal_c = price_c + transfer_c + tax_c %}</span>
<span class="w">            </span><span class="no">{% set cost_c = energy_kwh * subtotal_c * (1 + vat_pct) %}</span>
<span class="w">            </span><span class="no">{{ (cost_c / 100) | round(3) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span><span class="w"> </span><span class="c1"># &lt;-- CORRECTED: Use '- sensor:' inside the 'template:' block</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Current</span><span class="nv"> </span><span class="s">15-Minute</span><span class="nv"> </span><span class="s">Electricity</span><span class="nv"> </span><span class="s">Price"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="s">"current_15min_electricity_price"</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>

<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{# 1. Get the list of prices from the 'data' attribute #}</span>
<span class="w">          </span><span class="no">{% set price_data = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set current_time = now() %}</span>

<span class="w">          </span><span class="no">{# 2. Find the entry where the current time is between 'start' and 'end' #}</span>
<span class="w">          </span><span class="no">{% set current_price_item = price_data | selectattr('start', 'le', current_time.isoformat()) | selectattr('end', 'gt', current_time.isoformat()) | first %}</span>

<span class="w">          </span><span class="no">{% if current_price_item is defined %}</span>
<span class="w">            </span><span class="no">{# 3. Use the price value directly (it is already in cents/kWh) #}</span>
<span class="w">            </span><span class="no">{{ current_price_item.price | float(0) | round(3) }}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">{# Fallback: If no block is found, use the main state, also in c/kWh #}</span>
<span class="w">            </span><span class="no">{{ states('sensor.electricity_prices') | float(0) }}</span>
<span class="w">          </span><span class="no">{% endif %}</span>

<span class="w">  </span><span class="c1"># The second sensor goes under the same top-level 'template:' key</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span><span class="w"> </span><span class="c1"># &lt;-- CORRECTED: Use '- sensor:' for the second sensor as well</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"15-Minute</span><span class="nv"> </span><span class="s">Energy</span><span class="nv"> </span><span class="s">Cost</span><span class="nv"> </span><span class="s">Block"</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="s">"15min_energy_cost_block_total"</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c"</span>
<span class="w">        </span><span class="nt">device_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monetary</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">total</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{# Get the energy usage from the Utility Meter (Step 1: sensor.15_minute_energy_usage) #}</span>
<span class="w">          </span><span class="no">{% set usage = states('sensor.15_minute_energy_usage') | float(0) %}</span>
<span class="w">          </span><span class="no">{# Get the current price from the Template Sensor defined above #}</span>
<span class="w">          </span><span class="no">{% set price = states('sensor.current_15_minute_electricity_price') | float(0) %}</span>

<span class="w">          </span><span class="no">{# Calculation: Energy (kWh) * Price (c/kWh) = Total Cost in Cents (c) #}</span>
<span class="w">          </span><span class="no">{{ (usage * price) | float | round(2) }}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Tomorrow</span><span class="nv"> </span><span class="s">Average</span><span class="nv"> </span><span class="s">Electricity</span><span class="nv"> </span><span class="s">Price"</span>
<span class="w">        </span><span class="c1"># Unique ID for the sensor</span>
<span class="w">        </span><span class="nt">unique_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tomorrow_average_electricity_price</span>
<span class="w">        </span><span class="c1"># Set the unit of measurement, copied from your existing sensor</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">"c/kWh"</span>
<span class="w">        </span><span class="c1"># Set the device class to 'monetary' so it's treated as a price</span>

<span class="w">        </span><span class="c1"># Set the state class for long-term statistics</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="c1"># The 'icon' is optional, but this one fits</span>
<span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="s">"mdi:chart-line"</span>
<span class="w">        </span><span class="c1"># This is where the magic happens</span>
<span class="w">        </span><span class="nt">availability</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set tomorrow_str = (now().date() + timedelta(days=1)).isoformat() %}</span>
<span class="w">          </span><span class="no">{% set price_data = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% if price_data is not none %}</span>
<span class="w">            </span><span class="no">{% set tomorrow_prices = price_data </span>
<span class="w">                                     </span><span class="no">| selectattr('start', 'search', tomorrow_str) </span>
<span class="w">                                     </span><span class="no">| list %}</span>
<span class="w">            </span><span class="no">{{ tomorrow_prices | count &gt; 0 }}</span>
<span class="w">          </span><span class="no">{% else %}</span>
<span class="w">            </span><span class="no">{{ false }}</span>
<span class="w">          </span><span class="no">{% endif %}</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">          </span><span class="no">{% set tomorrow_str = (now().date() + timedelta(days=1)).isoformat() %}</span>
<span class="w">          </span><span class="no">{% set price_data = state_attr('sensor.electricity_prices', 'data') %}</span>
<span class="w">          </span><span class="no">{% set tomorrow_prices = price_data </span>
<span class="w">                                   </span><span class="no">| selectattr('start', 'search', tomorrow_str) </span>
<span class="w">                                   </span><span class="no">| map(attribute='price') </span>
<span class="w">                                   </span><span class="no">| list %}</span>
<span class="w">          </span><span class="no">{{ tomorrow_prices | average | round(3) }}</span>
</code></pre></div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright  2026 EvisHome
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better. We use Google Analytics to collect anonymous usage data.</p>
<input class="md-toggle" type="checkbox" id="__settings">
<div class="md-consent__settings">
  <ul class="task-list">
    
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics">
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.indexes"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>